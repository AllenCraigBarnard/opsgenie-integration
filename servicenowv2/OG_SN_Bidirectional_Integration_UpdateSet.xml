<?xml version="1.0" encoding="UTF-8"?>
<unload unload_date="2017-05-09 13:39:14">
<sys_remote_update_set action="INSERT_OR_UPDATE">
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<application_name>OpsGenie</application_name>
<application_scope>x_86994_opsgenie</application_scope>
<application_version>1.0.1</application_version>
<collisions/>
<commit_date/>
<deleted/>
<description>OpsGenie ServiceNow Bidirectional Integration.</description>
<inserted/>
<name>OpsGenie</name>
<origin_sys_id/>
<release_date/>
<remote_sys_id>64e3ea3adb22320030237d9ebf9619c4</remote_sys_id>
<state>loaded</state>
<summary/>
<sys_class_name>sys_remote_update_set</sys_class_name>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>18f3e27adb22320030237d9ebf9619f6</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<update_set display_value=""/>
<update_source display_value=""/>
<updated/>
</sys_remote_update_set>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_rest_message_fn_581746d2db00320030237d9ebf961940</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_rest_message_fn"><sys_rest_message_fn action="INSERT_OR_UPDATE"><authentication_type>inherit_from_parent</authentication_type><basic_auth_password/><basic_auth_profile/><basic_auth_user/><content/><function_name>get</function_name><http_method>get</http_method><lock>false</lock><oauth2_profile/><protocol_name/><qualified_name>OpsGenie Webhook [ get ]</qualified_name><rest_endpoint>https://api.opsgenie.com/v1/json/servicenowv2?apiKey=${apiKey}</rest_endpoint><rest_message display_value="OpsGenie Webhook">6dc682d2db00320030237d9ebf961911</rest_message><sys_class_name>sys_rest_message_fn</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-03 15:39:35</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>581746d2db00320030237d9ebf961940</sys_id><sys_mod_count>6</sys_mod_count><sys_name>get</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_rest_message_fn_581746d2db00320030237d9ebf961940</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-21 13:58:17</sys_updated_on><use_basic_auth>false</use_basic_auth><use_mid_server/><use_mutual_auth>false</use_mutual_auth></sys_rest_message_fn></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>10f3e27adb22320030237d9ebf9619f9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>get</target_name>
<type>HTTP Method</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_77c76232dbcc320030237d9ebf9619ac</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>execute</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-05 07:19:09</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>77c76232dbcc320030237d9ebf9619ac</sys_id><sys_mod_count>0</sys_mod_count><sys_name>ScriptableRESTMessageClient.setRequestBody</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_77c76232dbcc320030237d9ebf9619ac</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-05 07:19:09</sys_updated_on><target_name>ScriptableRESTMessageClient.setRequestBody</target_name><target_scope display_value="Global">global</target_scope><target_type>scriptable</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>10f3e27adb22320030237d9ebf9619fc</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>ScriptableRESTMessageClient.setRequestBody</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_de482a32dbcc320030237d9ebf96191e</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>execute</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-05 07:21:15</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>de482a32dbcc320030237d9ebf96191e</sys_id><sys_mod_count>0</sys_mod_count><sys_name>ScriptableRESTMessageClient.getEndpoint</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_de482a32dbcc320030237d9ebf96191e</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-05 07:21:15</sys_updated_on><target_name>ScriptableRESTMessageClient.getEndpoint</target_name><target_scope display_value="Global">global</target_scope><target_type>scriptable</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>10f3e67adb22320030237d9ebf9619ae</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>ScriptableRESTMessageClient.getEndpoint</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_51e5c3f9db38320030237d9ebf96197c</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri/&gt;&lt;enforce_acl/&gt;&lt;http_method&gt;POST&lt;/http_method&gt;&lt;name&gt;assignToUser&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	var body = request.body.data;
	
	gs.info("[Assign Incident To User] Processing message: {alias=" + body.alias + ", owner=" + body.assignedTo + "}");
	
	var alertAlias = body.alias;
	var assignedTo = body.assignedTo;
	
	var inc = new GlideRecord('incident');
	
	inc.addQuery("x_86994_opsgenie_alert_alias", alertAlias);
	inc.query();
	
	if (inc.next()) {
		var user = new GlideRecord('sys_user');
	
		user.addQuery('email', assignedTo);
		user.query();

		if (user.next()) {
			inc.assigned_to = user.sys_id.toString();

			inc.update();
			gs.info("[Assign User To Incident] Processing finished.");
		} else {
			gs.debug('[Assign User To Incident] Unable to find user with name: ' + assignedTo);
		}
	} else {
		gs.error('[Assign User To Incident] Unable to find incident with x_86994_opsgenie_alert_alias : ' + alertAlias);
	}
})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/x_86994_opsgenie/opsgenie2sn/assignToUser&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/assignToUser&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;false&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;false&lt;/requires_authentication&gt;&lt;short_description/&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-02-08 13:56:29&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;51e5c3f9db38320030237d9ebf96197c&lt;/sys_id&gt;&lt;sys_mod_count&gt;8&lt;/sys_mod_count&gt;&lt;sys_name&gt;assignToUser&lt;/sys_name&gt;&lt;sys_package display_value="OpsGenie" source="x_86994_opsgenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="OpsGenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_51e5c3f9db38320030237d9ebf96197c&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-02-21 13:31:34&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="opsgenie2sn"&gt;c08571f8dbd4320030237d9ebf961972&lt;/web_service_definition&gt;&lt;web_service_version/&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>10f3e67adb22320030237d9ebf9619b1</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>assignToUser</target_name>
<type>Scripted REST Resource</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_dictionary_incident_x_86994_opsgenie_alert_alias</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update&gt;&lt;sys_dictionary action="INSERT_OR_UPDATE" element="x_86994_opsgenie_alert_alias" table="incident"&gt;&lt;active&gt;true&lt;/active&gt;&lt;array&gt;false&lt;/array&gt;&lt;array_denormalized&gt;false&lt;/array_denormalized&gt;&lt;attributes/&gt;&lt;audit&gt;false&lt;/audit&gt;&lt;calculation&gt;&lt;![CDATA[(function calculatedFieldValue(current) {

	// Add your code here
	return '';  // return the calculated value

})(current);]]&gt;&lt;/calculation&gt;&lt;choice/&gt;&lt;choice_field/&gt;&lt;choice_table/&gt;&lt;column_label&gt;Alert alias&lt;/column_label&gt;&lt;comments/&gt;&lt;create_roles/&gt;&lt;default_value/&gt;&lt;defaultsort/&gt;&lt;delete_roles/&gt;&lt;dependent/&gt;&lt;dependent_on_field/&gt;&lt;display&gt;false&lt;/display&gt;&lt;dynamic_creation&gt;false&lt;/dynamic_creation&gt;&lt;dynamic_creation_script/&gt;&lt;dynamic_default_value/&gt;&lt;dynamic_ref_qual/&gt;&lt;element&gt;x_86994_opsgenie_alert_alias&lt;/element&gt;&lt;element_reference&gt;false&lt;/element_reference&gt;&lt;foreign_database/&gt;&lt;internal_type display_value="String"&gt;string&lt;/internal_type&gt;&lt;mandatory&gt;false&lt;/mandatory&gt;&lt;max_length&gt;512&lt;/max_length&gt;&lt;name&gt;incident&lt;/name&gt;&lt;next_element/&gt;&lt;primary&gt;false&lt;/primary&gt;&lt;read_only&gt;false&lt;/read_only&gt;&lt;read_roles/&gt;&lt;reference/&gt;&lt;reference_cascade_rule/&gt;&lt;reference_floats&gt;false&lt;/reference_floats&gt;&lt;reference_key/&gt;&lt;reference_qual/&gt;&lt;reference_qual_condition/&gt;&lt;reference_type/&gt;&lt;sizeclass/&gt;&lt;spell_check&gt;false&lt;/spell_check&gt;&lt;staged&gt;false&lt;/staged&gt;&lt;sys_class_name&gt;sys_dictionary&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-01-12 12:21:49&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;4310bf01db90720030237d9ebf9619a2&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;Alert alias&lt;/sys_name&gt;&lt;sys_package display_value="OpsGenie" source="x_86994_opsgenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="OpsGenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_dictionary_incident_x_86994_opsgenie_alert_alias&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-01-12 12:21:49&lt;/sys_updated_on&gt;&lt;table_reference&gt;false&lt;/table_reference&gt;&lt;text_index&gt;false&lt;/text_index&gt;&lt;unique&gt;false&lt;/unique&gt;&lt;use_dependent_field&gt;false&lt;/use_dependent_field&gt;&lt;use_dynamic_default&gt;false&lt;/use_dynamic_default&gt;&lt;use_reference_qualifier&gt;simple&lt;/use_reference_qualifier&gt;&lt;virtual&gt;false&lt;/virtual&gt;&lt;widget/&gt;&lt;write_roles/&gt;&lt;xml_view&gt;false&lt;/xml_view&gt;&lt;/sys_dictionary&gt;&lt;/record_update&gt;</payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>14f3e27adb22320030237d9ebf9619f8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table>incident</table>
<target_name>Incident.Alert alias</target_name>
<type>Dictionary</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_3ada4eb8dbd4320030237d9ebf961973</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>create</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>guest</sys_created_by><sys_created_on>2017-01-11 10:20:30</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>3ada4eb8dbd4320030237d9ebf961973</sys_id><sys_mod_count>0</sys_mod_count><sys_name>incident</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_3ada4eb8dbd4320030237d9ebf961973</sys_update_name><sys_updated_by>guest</sys_updated_by><sys_updated_on>2017-01-11 10:20:30</sys_updated_on><target_name>incident</target_name><target_scope display_value="Global">global</target_scope><target_type>sys_db_object</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>14f3e27adb22320030237d9ebf9619fb</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>incident</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_02d535f8dbd4320030237d9ebf961921</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri/&gt;&lt;enforce_acl&gt;9bdf2c9137031200612747efbe41f1fd&lt;/enforce_acl&gt;&lt;http_method&gt;POST&lt;/http_method&gt;&lt;name&gt;create&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	var body = request.body.data;
	
	var inc = new GlideRecord('incident');
	
	inc.short_description = body.shortDescription;
	inc.description = body.description;
	inc.x_86994_opsgenie_alert_alias = body.alias;

	var groupName = body.group;
	
	if (groupName != null &amp;&amp; groupName != "") {
		var group = new GlideRecord('sys_user_group');
	
		group.addQuery('name', groupName);
		group.query();

		if (group.next()) {
			inc.assignment_group = group.sys_id.toString();
		} else {
			gs.debug('[Create Incident] Unable to find group with name: ' + groupName);
		}
	}
	
	inc.insert();
	
	var incidentLink = gs.getProperty('glide.servlet.uri') + inc.getLink(false);
	var sysId = inc.getUniqueValue();
	
	return {
		"incidentLink": incidentLink,
		"sysId": sysId
	};
})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/x_86994_opsgenie/opsgenie2sn&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;false&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;false&lt;/requires_authentication&gt;&lt;short_description/&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-01-11 08:51:10&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;02d535f8dbd4320030237d9ebf961921&lt;/sys_id&gt;&lt;sys_mod_count&gt;27&lt;/sys_mod_count&gt;&lt;sys_name&gt;create&lt;/sys_name&gt;&lt;sys_package display_value="OpsGenie" source="x_86994_opsgenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="OpsGenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_02d535f8dbd4320030237d9ebf961921&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-05-09 13:36:33&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="opsgenie2sn"&gt;c08571f8dbd4320030237d9ebf961972&lt;/web_service_definition&gt;&lt;web_service_version/&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>14f3e67adb22320030237d9ebf9619b0</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>create</target_name>
<type>Scripted REST Resource</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_app_module_1eedb5fcdbd4320030237d9ebf96192a</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_app_module"><sys_app_module action="INSERT_OR_UPDATE"><active>true</active><application display_value="OpsGenie">e92b8656db00320030237d9ebf9619f9</application><assessment/><content_page/><device_type/><filter table="sys_ws_definition">nameLIKEOpsGenie^EQ<item endquery="false" field="name" goto="false" newquery="false" operator="LIKE" or="false" value="OpsGenie"/><item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/></filter><hint/><homepage/><image/><link_type>LIST</link_type><map_page/><mobile_title>Scripted REST APIs</mobile_title><mobile_view_name>Mobile</mobile_view_name><name>sys_ws_definition</name><order/><override_menu_roles>false</override_menu_roles><query/><report/><roles/><survey/><survey_overwrite>true</survey_overwrite><sys_class_name>sys_app_module</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-11 09:24:55</sys_created_on><sys_customer_update>true</sys_customer_update><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>1eedb5fcdbd4320030237d9ebf96192a</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Scripted REST APIs</sys_name><sys_overrides/><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_app_module_1eedb5fcdbd4320030237d9ebf96192a</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-11 09:24:55</sys_updated_on><timeline_page/><title>Scripted REST APIs</title><uncancelable>false</uncancelable><view_name/><window_name/></sys_app_module></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>18f3e27adb22320030237d9ebf9619f7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table>sys_ws_definition</table>
<target_name>Scripted REST APIs</target_name>
<type>Module</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_1acaa1e2db84320030237d9ebf9619fa</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>execute</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-04 08:14:03</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>1acaa1e2db84320030237d9ebf9619fa</sys_id><sys_mod_count>0</sys_mod_count><sys_name>ScopedGlideElement</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_1acaa1e2db84320030237d9ebf9619fa</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-04 08:14:03</sys_updated_on><target_name>ScopedGlideElement</target_name><target_scope display_value="Global">global</target_scope><target_type>scriptable</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>18f3e27adb22320030237d9ebf9619fa</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>ScopedGlideElement</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_script_cab48e52db00320030237d9ebf961984</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;false&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;true&lt;/action_update&gt;&lt;active&gt;true&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;incident&lt;/collection&gt;&lt;condition/&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition table="incident"&gt;assignment_groupVALCHANGES^EQ&lt;item endquery="false" field="assignment_group" goto="false" newquery="false" operator="VALCHANGES" or="false" value=""/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/filter_condition&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;OpsGenie Add Team&lt;/name&gt;&lt;order&gt;3&lt;/order&gt;&lt;priority&gt;1&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {
	var client = new OpsGenie_Client();
	var alertAlias = current.x_86994_opsgenie_alert_alias.toString();
	
	var contentMap = {
		team : current.assignment_group.name.toString()
	};
	
	if (alertAlias == null || alertAlias == "") {
		contentMap.alias = current.number.toString();
	} else {
		contentMap.alias = alertAlias.toString();
	}
	
	client.postToOpsGenieAlertAPI(contentMap, "/team");
})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-01-03 15:30:30&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;cab48e52db00320030237d9ebf961984&lt;/sys_id&gt;&lt;sys_mod_count&gt;8&lt;/sys_mod_count&gt;&lt;sys_name&gt;OpsGenie Add Team&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="OpsGenie" source="x_86994_opsgenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="OpsGenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_cab48e52db00320030237d9ebf961984&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-02-13 10:06:42&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;async&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=cab48e52db00320030237d9ebf961984"/&gt;&lt;/record_update&gt;</payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>18f3e67adb22320030237d9ebf9619af</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table>incident</table>
<target_name>OpsGenie Add Team</target_name>
<type>Business Rule</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_rest_message_fn_947786d2db00320030237d9ebf961923</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_rest_message_fn"><sys_rest_message_fn action="INSERT_OR_UPDATE"><authentication_type>inherit_from_parent</authentication_type><basic_auth_password/><basic_auth_profile/><basic_auth_user/><content/><function_name>delete</function_name><http_method>delete</http_method><lock>false</lock><oauth2_profile/><protocol_name/><qualified_name>OpsGenie Webhook [ delete ]</qualified_name><rest_endpoint>https://api.opsgenie.com/v1/json/servicenowv2?apiKey=${apiKey}</rest_endpoint><rest_message display_value="OpsGenie Webhook">6dc682d2db00320030237d9ebf961911</rest_message><sys_class_name>sys_rest_message_fn</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-03 15:40:58</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>947786d2db00320030237d9ebf961923</sys_id><sys_mod_count>6</sys_mod_count><sys_name>delete</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_rest_message_fn_947786d2db00320030237d9ebf961923</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-21 13:59:33</sys_updated_on><use_basic_auth>false</use_basic_auth><use_mid_server/><use_mutual_auth>false</use_mutual_auth></sys_rest_message_fn></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>1cf3e27adb22320030237d9ebf9619f9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>delete</target_name>
<type>HTTP Method</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_eee95eb4db18320030237d9ebf96198f</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>execute</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>guest</sys_created_by><sys_created_on>2017-01-11 11:26:18</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>eee95eb4db18320030237d9ebf96198f</sys_id><sys_mod_count>0</sys_mod_count><sys_name>GlideRecord.setValue</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_eee95eb4db18320030237d9ebf96198f</sys_update_name><sys_updated_by>guest</sys_updated_by><sys_updated_on>2017-01-11 11:26:18</sys_updated_on><target_name>GlideRecord.setValue</target_name><target_scope display_value="Global">global</target_scope><target_type>scriptable</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>1cf3e67adb22320030237d9ebf9619ae</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>GlideRecord.setValue</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_app_module_fd1d952edb44320030237d9ebf961929</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_app_module"><sys_app_module action="INSERT_OR_UPDATE"><active>true</active><application display_value="OpsGenie">e92b8656db00320030237d9ebf9619f9</application><assessment/><content_page/><device_type/><filter table="sys_script_include">nameLIKEopsgenie^EQ<item endquery="false" field="name" goto="false" newquery="false" operator="LIKE" or="false" value="opsgenie"/><item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/></filter><hint/><homepage/><image/><link_type>LIST</link_type><map_page/><mobile_title>Script Includes</mobile_title><mobile_view_name>Mobile</mobile_view_name><name>sys_script_include</name><order/><override_menu_roles>false</override_menu_roles><query/><report/><roles/><survey/><survey_overwrite>true</survey_overwrite><sys_class_name>sys_app_module</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-04 07:17:59</sys_created_on><sys_customer_update>true</sys_customer_update><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>fd1d952edb44320030237d9ebf961929</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Script Includes</sys_name><sys_overrides/><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_app_module_fd1d952edb44320030237d9ebf961929</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-04 07:17:59</sys_updated_on><timeline_page/><title>Script Includes</title><uncancelable>false</uncancelable><view_name/><window_name/></sys_app_module></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>50f3e27adb22320030237d9ebf9619f8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table>sys_script_include</table>
<target_name>Script Includes</target_name>
<type>Module</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_36482a32dbcc320030237d9ebf961922</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>execute</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-05 07:21:16</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>36482a32dbcc320030237d9ebf961922</sys_id><sys_mod_count>0</sys_mod_count><sys_name>ScriptableRESTResponse.getBody</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_36482a32dbcc320030237d9ebf961922</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-05 07:21:16</sys_updated_on><target_name>ScriptableRESTResponse.getBody</target_name><target_scope display_value="Global">global</target_scope><target_type>scriptable</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>50f3e27adb22320030237d9ebf9619fb</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>ScriptableRESTResponse.getBody</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_ws_definition_c08571f8dbd4320030237d9ebf961972</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_definition"><sys_ws_definition action="INSERT_OR_UPDATE"><active>true</active><base_uri>/api/x_86994_opsgenie/opsgenie2sn</base_uri><consumes>application/json,application/xml,text/xml</consumes><consumes_customized>false</consumes_customized><default_version>No active default version</default_version><doc_link/><enforce_acl/><is_versioned>false</is_versioned><name>opsgenie2sn</name><namespace>x_86994_opsgenie</namespace><produces>application/json,application/xml,text/xml</produces><produces_customized>false</produces_customized><service_id>opsgenie2sn</service_id><short_description/><sys_class_name>sys_ws_definition</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-11 08:47:44</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>c08571f8dbd4320030237d9ebf961972</sys_id><sys_mod_count>0</sys_mod_count><sys_name>opsgenie2sn</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_ws_definition_c08571f8dbd4320030237d9ebf961972</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-11 08:47:44</sys_updated_on></sys_ws_definition></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>50f3e67adb22320030237d9ebf9619b0</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>opsgenie2sn</target_name>
<type>Scripted REST API</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_app_application_e92b8656db00320030237d9ebf9619f9</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_app_application"><sys_app_application action="INSERT_OR_UPDATE"><active>true</active><category display_value="Custom Applications">e0355b31ef303000a61d5a3615c0fb78</category><description/><device_type>browser</device_type><hint/><name/><order>100</order><roles/><sys_class_name>sys_app_application</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-03 15:57:17</sys_created_on><sys_customer_update>true</sys_customer_update><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>e92b8656db00320030237d9ebf9619f9</sys_id><sys_mod_count>0</sys_mod_count><sys_name>OpsGenie</sys_name><sys_overrides/><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_app_application_e92b8656db00320030237d9ebf9619f9</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-03 15:57:17</sys_updated_on><title>OpsGenie</title><view_name/></sys_app_application></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>54f3e27adb22320030237d9ebf9619f7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>OpsGenie</target_name>
<type>Application Menu</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_rest_message_fn_f0353db8dbd4320030237d9ebf9619cc</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_rest_message_fn"><sys_rest_message_fn action="INSERT_OR_UPDATE"><authentication_type>inherit_from_parent</authentication_type><basic_auth_password/><basic_auth_profile/><basic_auth_user/><content/><function_name>delete</function_name><http_method>delete</http_method><lock>false</lock><oauth2_profile/><protocol_name/><qualified_name>OpsGenie Alert API Endpoint [ delete ]</qualified_name><rest_endpoint>https://api.opsgenie.com/v1/json/alert${subEndPoint}?apiKey=${apiKey}</rest_endpoint><rest_message display_value="OpsGenie Alert API Endpoint">a80435b8dbd4320030237d9ebf961914</rest_message><sys_class_name>sys_rest_message_fn</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-11 08:46:05</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>f0353db8dbd4320030237d9ebf9619cc</sys_id><sys_mod_count>6</sys_mod_count><sys_name>delete</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_rest_message_fn_f0353db8dbd4320030237d9ebf9619cc</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-21 13:57:37</sys_updated_on><use_basic_auth>false</use_basic_auth><use_mid_server/><use_mutual_auth>false</use_mutual_auth></sys_rest_message_fn></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>54f3e27adb22320030237d9ebf9619fa</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>delete</target_name>
<type>HTTP Method</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_script_65961ee6dbc4320030237d9ebf96190c</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;true&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;false&lt;/action_update&gt;&lt;active&gt;true&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;incident&lt;/collection&gt;&lt;condition/&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition/&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;OpsGenie Create Alert&lt;/name&gt;&lt;order&gt;1&lt;/order&gt;&lt;priority&gt;1&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {
	var shortDescription = current.short_description.toString();
	var priority = current.priority.getDisplayValue().toString();
	var incidentNumber = current.number.toString();
	var openedAt = current.opened_at.toString();
	var category = current.category.toString();
	var severity = current.severity.getDisplayValue().toString();
	var state = current.state.getDisplayValue().toString();
	var assignedTo = current.assigned_to.name.toString();
	var assignedToEmail = current.assigned_to.email.toString();
	var assignmentGroup = current.assignment_group.name.toString();
	var workNotes = current.work_notes.toString();
	var incidentLink = current.getLink(false);
	var sysId = current.getUniqueValue();
	
	var alertAlias = current.x_86994_opsgenie_alert_alias.toString();
	
	if (alertAlias == null || alertAlias == "") {
		var client = new OpsGenie_Client();
		var contentMap = {
			alias: incidentNumber,
			incidentNumber: incidentNumber,
			shortDescription: shortDescription,
			priority: priority,
			openedAt: openedAt,
			category: category,
			severity: severity,
			state: state,
			assignedTo: assignedTo,
			assignedToEmail: assignedToEmail,
			assignmentGroup: assignmentGroup,
			workNotes: workNotes,
			teams: assignmentGroup,
			recipients: assignedToEmail,
			incidentLink: gs.getProperty('glide.servlet.uri') + incidentLink,
			sysId: sysId
		};
		client.postToOpsGenie(contentMap);
		current.x_86994_opsgenie_alert_alias = incidentNumber;
		current.update();
	} else {
		gs.info("[Create Alert] Incident was created from OpsGenie alert, skipping sending to OpsGenie.");
	}
})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-01-04 11:25:26&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;65961ee6dbc4320030237d9ebf96190c&lt;/sys_id&gt;&lt;sys_mod_count&gt;34&lt;/sys_mod_count&gt;&lt;sys_name&gt;OpsGenie Create Alert&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="OpsGenie" source="x_86994_opsgenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="OpsGenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_65961ee6dbc4320030237d9ebf96190c&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-05-09 13:35:23&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;async&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=65961ee6dbc4320030237d9ebf96190c"/&gt;&lt;/record_update&gt;</payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>54f3e67adb22320030237d9ebf9619af</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table>incident</table>
<target_name>OpsGenie Create Alert</target_name>
<type>Business Rule</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_rest_message_fn_8af4f9b8dbd4320030237d9ebf9619d6</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_rest_message_fn"><sys_rest_message_fn action="INSERT_OR_UPDATE"><authentication_type>inherit_from_parent</authentication_type><basic_auth_password/><basic_auth_profile/><basic_auth_user/><content/><function_name>get</function_name><http_method>get</http_method><lock>false</lock><oauth2_profile/><protocol_name/><qualified_name>OpsGenie Alert API Endpoint [ get ]</qualified_name><rest_endpoint>https://api.opsgenie.com/v1/json/alert${subEndPoint}?apiKey=${apiKey}</rest_endpoint><rest_message display_value="OpsGenie Alert API Endpoint">a80435b8dbd4320030237d9ebf961914</rest_message><sys_class_name>sys_rest_message_fn</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-11 08:45:10</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>8af4f9b8dbd4320030237d9ebf9619d6</sys_id><sys_mod_count>6</sys_mod_count><sys_name>get</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_rest_message_fn_8af4f9b8dbd4320030237d9ebf9619d6</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-21 13:56:15</sys_updated_on><use_basic_auth>false</use_basic_auth><use_mid_server/><use_mutual_auth>false</use_mutual_auth></sys_rest_message_fn></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>58f3e27adb22320030237d9ebf9619f9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>get</target_name>
<type>HTTP Method</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_beda4eb8dbd4320030237d9ebf961971</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>execute</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>guest</sys_created_by><sys_created_on>2017-01-11 10:20:30</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>beda4eb8dbd4320030237d9ebf961971</sys_id><sys_mod_count>0</sys_mod_count><sys_name>GlideRecord.insert</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_beda4eb8dbd4320030237d9ebf961971</sys_update_name><sys_updated_by>guest</sys_updated_by><sys_updated_on>2017-01-11 10:20:30</sys_updated_on><target_name>GlideRecord.insert</target_name><target_scope display_value="Global">global</target_scope><target_type>scriptable</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>58f3e27adb22320030237d9ebf9619fc</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>GlideRecord.insert</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_ed2ac2b8dbd4320030237d9ebf96198b</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>execute</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>guest</sys_created_by><sys_created_on>2017-01-11 10:17:25</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>ed2ac2b8dbd4320030237d9ebf96198b</sys_id><sys_mod_count>0</sys_mod_count><sys_name>RESTAPIRequestBody</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_ed2ac2b8dbd4320030237d9ebf96198b</sys_update_name><sys_updated_by>guest</sys_updated_by><sys_updated_on>2017-01-11 10:17:25</sys_updated_on><target_name>RESTAPIRequestBody</target_name><target_scope display_value="Global">global</target_scope><target_type>scriptable</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>58f3e67adb22320030237d9ebf9619ae</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>RESTAPIRequestBody</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_rest_message_a80435b8dbd4320030237d9ebf961914</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_rest_message"><sys_rest_message action="INSERT_OR_UPDATE"><access>package_private</access><authentication_type>no_authentication</authentication_type><basic_auth_password/><basic_auth_profile/><basic_auth_user/><description>OpsGenie Alert API Endpoint.</description><name>OpsGenie Alert API Endpoint</name><oauth2_profile/><protocol_name/><rest_endpoint>https://api.opsgenie.com/v1/json/alert${subEndPoint}?apiKey=${apiKey}</rest_endpoint><sys_class_name>sys_rest_message</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-11 08:42:08</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>a80435b8dbd4320030237d9ebf961914</sys_id><sys_mod_count>7</sys_mod_count><sys_name>OpsGenie Alert API Endpoint</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_rest_message_a80435b8dbd4320030237d9ebf961914</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-21 14:01:31</sys_updated_on><use_basic_auth>false</use_basic_auth><use_mutual_auth>false</use_mutual_auth></sys_rest_message></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>5cf3e27adb22320030237d9ebf9619f8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>OpsGenie Alert API Endpoint</target_name>
<type>REST Message</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_692ac2b8dbd4320030237d9ebf961989</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>execute</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>guest</sys_created_by><sys_created_on>2017-01-11 10:17:25</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>692ac2b8dbd4320030237d9ebf961989</sys_id><sys_mod_count>0</sys_mod_count><sys_name>RESTAPIRequest</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_692ac2b8dbd4320030237d9ebf961989</sys_update_name><sys_updated_by>guest</sys_updated_by><sys_updated_on>2017-01-11 10:17:25</sys_updated_on><target_name>RESTAPIRequest</target_name><target_scope display_value="Global">global</target_scope><target_type>scriptable</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>5cf3e27adb22320030237d9ebf9619fb</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>RESTAPIRequest</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_38f88335db38320030237d9ebf9619ca</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri/&gt;&lt;enforce_acl/&gt;&lt;http_method&gt;POST&lt;/http_method&gt;&lt;name&gt;addWorkNotes&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	var body = request.body.data;
	
	gs.info("[Add Note To Incident] Processing message: {alias=" + body.alias + ", note=" + body.workNotes + "}");
	
	var alertAlias = body.alias;
	var note = body.workNotes;
	
	var inc = new GlideRecord('incident');
	
	inc.addQuery("x_86994_opsgenie_alert_alias", alertAlias);
	inc.query();
	
	if (inc.next()) {
		inc.work_notes = note;
		
		inc.update();
		gs.info("[Add Note To Incident] Processing finished.");
	} else {
		gs.error('[Add Note To Incident] Unable to find incident with x_86994_opsgenie_alert_alias : ' + alertAlias);
	}
})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/x_86994_opsgenie/opsgenie2sn/addWorkNotes&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/addWorkNotes&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;false&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;false&lt;/requires_authentication&gt;&lt;short_description/&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-02-08 14:03:52&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;38f88335db38320030237d9ebf9619ca&lt;/sys_id&gt;&lt;sys_mod_count&gt;3&lt;/sys_mod_count&gt;&lt;sys_name&gt;addWorkNotes&lt;/sys_name&gt;&lt;sys_package display_value="OpsGenie" source="x_86994_opsgenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="OpsGenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_38f88335db38320030237d9ebf9619ca&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-02-21 07:41:04&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="opsgenie2sn"&gt;c08571f8dbd4320030237d9ebf961972&lt;/web_service_definition&gt;&lt;web_service_version/&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>5cf3e67adb22320030237d9ebf9619b0</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>addWorkNotes</target_name>
<type>Scripted REST Resource</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_app_98838612db00320030237d9ebf9619ae</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_app"><sys_app action="INSERT_OR_UPDATE"><active>true</active><enforce_license>log</enforce_license><js_level>helsinki_es5</js_level><licensable>true</licensable><license_model>none</license_model><logo/><menu display_value="OpsGenie">e92b8656db00320030237d9ebf9619f9</menu><name>OpsGenie</name><private>false</private><restrict_table_access>false</restrict_table_access><runtime_access_tracking>permissive</runtime_access_tracking><scope>x_86994_opsgenie</scope><scoped_administration>false</scoped_administration><short_description/><source>x_86994_opsgenie</source><store_correlation_id/><store_url/><sys_class_name>sys_app</sys_class_name><sys_code/><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-03 15:23:36</sys_created_on><sys_id>98838612db00320030237d9ebf9619ae</sys_id><sys_mod_count>3</sys_mod_count><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-05-09 13:39:01</sys_updated_on><template/><trackable>true</trackable><user_role/><vendor/><vendor_prefix/><version>1.0.1</version></sys_app></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>90f3e27adb22320030237d9ebf9619f7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>OpsGenie</target_name>
<type>Custom Application</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_rest_message_fn_e825b9b8dbd4320030237d9ebf9619d1</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_rest_message_fn"><sys_rest_message_fn action="INSERT_OR_UPDATE"><authentication_type>inherit_from_parent</authentication_type><basic_auth_password/><basic_auth_profile/><basic_auth_user/><content/><function_name>put</function_name><http_method>put</http_method><lock>false</lock><oauth2_profile/><protocol_name/><qualified_name>OpsGenie Alert API Endpoint [ put ]</qualified_name><rest_endpoint>https://api.opsgenie.com/v1/json/alert${subEndPoint}?apiKey=${apiKey}</rest_endpoint><rest_message display_value="OpsGenie Alert API Endpoint">a80435b8dbd4320030237d9ebf961914</rest_message><sys_class_name>sys_rest_message_fn</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-11 08:45:46</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>e825b9b8dbd4320030237d9ebf9619d1</sys_id><sys_mod_count>6</sys_mod_count><sys_name>put</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_rest_message_fn_e825b9b8dbd4320030237d9ebf9619d1</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-21 13:57:18</sys_updated_on><use_basic_auth>false</use_basic_auth><use_mid_server/><use_mutual_auth>false</use_mutual_auth></sys_rest_message_fn></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>90f3e27adb22320030237d9ebf9619fa</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>put</target_name>
<type>HTTP Method</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_script_4da38a52db00320030237d9ebf9619e4</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;false&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;true&lt;/action_update&gt;&lt;active&gt;true&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;incident&lt;/collection&gt;&lt;condition/&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition table="incident"&gt;assigned_toVALCHANGES^EQ&lt;item endquery="false" field="assigned_to" goto="false" newquery="false" operator="VALCHANGES" or="false" value=""/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/filter_condition&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;OpsGenie Assign Alert&lt;/name&gt;&lt;order&gt;4&lt;/order&gt;&lt;priority&gt;1&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {
	var client = new OpsGenie_Client();
	var alertAlias = current.x_86994_opsgenie_alert_alias.toString();
	
	var contentMap = {
		owner : current.assigned_to.email.toString()
	};
	
	if (alertAlias == null || alertAlias == "") {
		contentMap.alias = current.number.toString();
	} else {
		contentMap.alias = alertAlias.toString();
	}
	
	client.postToOpsGenieAlertAPI(contentMap, "/assign");
})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-01-03 15:26:01&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;4da38a52db00320030237d9ebf9619e4&lt;/sys_id&gt;&lt;sys_mod_count&gt;10&lt;/sys_mod_count&gt;&lt;sys_name&gt;OpsGenie Assign Alert&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="OpsGenie" source="x_86994_opsgenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="OpsGenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_4da38a52db00320030237d9ebf9619e4&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-02-21 09:46:21&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;async&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=4da38a52db00320030237d9ebf9619e4"/&gt;&lt;/record_update&gt;</payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>90f3e67adb22320030237d9ebf9619af</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table>incident</table>
<target_name>OpsGenie Assign Alert</target_name>
<type>Business Rule</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_rest_message_fn_63578e92db00320030237d9ebf9619aa</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_rest_message_fn"><sys_rest_message_fn action="INSERT_OR_UPDATE"><authentication_type>inherit_from_parent</authentication_type><basic_auth_password/><basic_auth_profile/><basic_auth_user/><content/><function_name>put</function_name><http_method>put</http_method><lock>false</lock><oauth2_profile/><protocol_name/><qualified_name>OpsGenie Webhook [ put ]</qualified_name><rest_endpoint>https://api.opsgenie.com/v1/json/servicenowv2?apiKey=${apiKey}</rest_endpoint><rest_message display_value="OpsGenie Webhook">6dc682d2db00320030237d9ebf961911</rest_message><sys_class_name>sys_rest_message_fn</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-03 15:40:40</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>63578e92db00320030237d9ebf9619aa</sys_id><sys_mod_count>6</sys_mod_count><sys_name>put</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_rest_message_fn_63578e92db00320030237d9ebf9619aa</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-21 13:59:16</sys_updated_on><use_basic_auth>false</use_basic_auth><use_mid_server/><use_mutual_auth>false</use_mutual_auth></sys_rest_message_fn></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>94f3e27adb22320030237d9ebf9619f9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>put</target_name>
<type>HTTP Method</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_96caa1e2db84320030237d9ebf9619fe</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>execute</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-04 08:14:03</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>96caa1e2db84320030237d9ebf9619fe</sys_id><sys_mod_count>0</sys_mod_count><sys_name>ScriptableRESTMessageClient.setStringParameter</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_96caa1e2db84320030237d9ebf9619fe</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-04 08:14:03</sys_updated_on><target_name>ScriptableRESTMessageClient.setStringParameter</target_name><target_scope display_value="Global">global</target_scope><target_type>scriptable</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>94f3e27adb22320030237d9ebf9619fc</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>ScriptableRESTMessageClient.setStringParameter</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_eae7efc6db30720030237d9ebf961930</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>write</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-02-09 10:50:53</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>eae7efc6db30720030237d9ebf961930</sys_id><sys_mod_count>0</sys_mod_count><sys_name>incident</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_eae7efc6db30720030237d9ebf961930</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-09 10:50:53</sys_updated_on><target_name>incident</target_name><target_scope display_value="Global">global</target_scope><target_type>sys_db_object</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>94f3e67adb22320030237d9ebf9619ae</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>incident</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_rest_message_6dc682d2db00320030237d9ebf961911</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_rest_message"><sys_rest_message action="INSERT_OR_UPDATE"><access>package_private</access><authentication_type>no_authentication</authentication_type><basic_auth_password/><basic_auth_profile/><basic_auth_user/><description>OpsGenie ServiceNow Integration Endpoint.</description><name>OpsGenie Webhook</name><oauth2_profile/><protocol_name/><rest_endpoint>https://api.opsgenie.com/v1/json/servicenowv2?apiKey=${apiKey}</rest_endpoint><sys_class_name>sys_rest_message</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-03 15:38:36</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>6dc682d2db00320030237d9ebf961911</sys_id><sys_mod_count>8</sys_mod_count><sys_name>OpsGenie Webhook</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_rest_message_6dc682d2db00320030237d9ebf961911</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-21 14:01:46</sys_updated_on><use_basic_auth>false</use_basic_auth><use_mutual_auth>false</use_mutual_auth></sys_rest_message></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>98f3e27adb22320030237d9ebf9619f8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>OpsGenie Webhook</target_name>
<type>REST Message</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_61317f8fdbc4720030237d9ebf9619fc</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>execute</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-06 07:18:20</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>61317f8fdbc4720030237d9ebf9619fc</sys_id><sys_mod_count>0</sys_mod_count><sys_name>ScriptableRESTMessageClient.execute</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_61317f8fdbc4720030237d9ebf9619fc</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-06 07:18:20</sys_updated_on><target_name>ScriptableRESTMessageClient.execute</target_name><target_scope display_value="Global">global</target_scope><target_type>scriptable</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>98f3e27adb22320030237d9ebf9619fb</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>ScriptableRESTMessageClient.execute</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_3465a8abdbf8720030237d9ebf9619de</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri/&gt;&lt;enforce_acl/&gt;&lt;http_method&gt;POST&lt;/http_method&gt;&lt;name&gt;close&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	var body = request.body.data;

	gs.info("[Close Incident] Processing message: {alias=" + body.alias + ", note=" + body.workNotes + "}");	
	
	var alertAlias = body.alias;
	var closeNote = body.workNotes;
	
	var inc = new GlideRecord('incident');
	
	inc.addQuery("x_86994_opsgenie_alert_alias", alertAlias);
	inc.query();
	
	if (inc.next()) {
		inc.close_notes = closeNote;
		inc.close_code = "Solved (Permanently)";
		inc.state = 7;
		
		inc.update();
		gs.info("[Close Incident] Processing finished.");
	} else {
		gs.info("[Close Incident] Alert Id not found, skipping action.");
	}
})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/x_86994_opsgenie/opsgenie2sn/close&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/close&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;false&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;false&lt;/requires_authentication&gt;&lt;short_description/&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-02-13 12:34:48&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;3465a8abdbf8720030237d9ebf9619de&lt;/sys_id&gt;&lt;sys_mod_count&gt;5&lt;/sys_mod_count&gt;&lt;sys_name&gt;close&lt;/sys_name&gt;&lt;sys_package display_value="OpsGenie" source="x_86994_opsgenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="OpsGenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_3465a8abdbf8720030237d9ebf9619de&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-02-21 12:08:25&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="opsgenie2sn"&gt;c08571f8dbd4320030237d9ebf961972&lt;/web_service_definition&gt;&lt;web_service_version/&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>98f3e67adb22320030237d9ebf9619b0</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>close</target_name>
<type>Scripted REST Resource</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_app_module_480ed52edb44320030237d9ebf961974</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_app_module"><sys_app_module action="INSERT_OR_UPDATE"><active>true</active><application display_value="OpsGenie">e92b8656db00320030237d9ebf9619f9</application><assessment/><content_page/><device_type/><filter table="sys_script">nameLIKEopsgenie^EQ<item endquery="false" field="name" goto="false" newquery="false" operator="LIKE" or="false" value="opsgenie"/><item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/></filter><hint/><homepage/><image/><link_type>LIST</link_type><map_page/><mobile_title>Business Rules</mobile_title><mobile_view_name>Mobile</mobile_view_name><name>sys_script</name><order/><override_menu_roles>false</override_menu_roles><query/><report/><roles/><survey/><survey_overwrite>true</survey_overwrite><sys_class_name>sys_app_module</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-04 07:19:21</sys_created_on><sys_customer_update>true</sys_customer_update><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>480ed52edb44320030237d9ebf961974</sys_id><sys_mod_count>3</sys_mod_count><sys_name>Business Rules</sys_name><sys_overrides/><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_app_module_480ed52edb44320030237d9ebf961974</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-04 07:53:50</sys_updated_on><timeline_page/><title>Business Rules</title><uncancelable>false</uncancelable><view_name/><window_name/></sys_app_module></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>9cf3e27adb22320030237d9ebf9619f7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table>sys_script</table>
<target_name>Business Rules</target_name>
<type>Module</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_2dcce30adb30720030237d9ebf9619eb</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>read</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>guest</sys_created_by><sys_created_on>2017-02-09 11:12:07</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>2dcce30adb30720030237d9ebf9619eb</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sys_user_group</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_2dcce30adb30720030237d9ebf9619eb</sys_update_name><sys_updated_by>guest</sys_updated_by><sys_updated_on>2017-02-09 11:12:07</sys_updated_on><target_name>sys_user_group</target_name><target_scope display_value="Global">global</target_scope><target_type>sys_db_object</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>9cf3e27adb22320030237d9ebf9619fa</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>sys_user_group</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_ui_list_incident_null</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_ui_list parent="" relationship="" sys_domain="global" table="incident" version="2" view=""><sys_ui_list_element action="INSERT_OR_UPDATE"><average_value>false</average_value><element>number</element><list_id display_value="task" element="NULL" name="task" parent="NULL" relationship="NULL" sys_domain="global" view="Default view">62a6676f8c21320092c0afb9ff6cd480</list_id><max_value>false</max_value><min_value>false</min_value><position>0</position><sum>false</sum><sys_created_by>system</sys_created_by><sys_created_on>2017-03-23 09:23:24</sys_created_on><sys_id>e2a6676f8c21320092c0afb9ff6cd480</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>system</sys_updated_by><sys_updated_on>2017-03-23 09:23:24</sys_updated_on></sys_ui_list_element><sys_ui_list_element action="INSERT_OR_UPDATE"><average_value>false</average_value><element>priority</element><list_id display_value="task" element="NULL" name="task" parent="NULL" relationship="NULL" sys_domain="global" view="Default view">62a6676f8c21320092c0afb9ff6cd480</list_id><max_value>false</max_value><min_value>false</min_value><position>1</position><sum>false</sum><sys_created_by>system</sys_created_by><sys_created_on>2017-03-23 09:23:24</sys_created_on><sys_id>66a6676f8c21320092c0afb9ff6cd480</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>system</sys_updated_by><sys_updated_on>2017-03-23 09:23:24</sys_updated_on></sys_ui_list_element><sys_ui_list_element action="INSERT_OR_UPDATE"><average_value>false</average_value><element>state</element><list_id display_value="task" element="NULL" name="task" parent="NULL" relationship="NULL" sys_domain="global" view="Default view">62a6676f8c21320092c0afb9ff6cd480</list_id><max_value>false</max_value><min_value>false</min_value><position>2</position><sum>false</sum><sys_created_by>system</sys_created_by><sys_created_on>2017-03-23 09:23:24</sys_created_on><sys_id>e6a6676f8c21320092c0afb9ff6cd480</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>system</sys_updated_by><sys_updated_on>2017-03-23 09:23:24</sys_updated_on></sys_ui_list_element><sys_ui_list_element action="INSERT_OR_UPDATE"><average_value>false</average_value><element>assigned_to</element><list_id display_value="task" element="NULL" name="task" parent="NULL" relationship="NULL" sys_domain="global" view="Default view">62a6676f8c21320092c0afb9ff6cd480</list_id><max_value>false</max_value><min_value>false</min_value><position>3</position><sum>false</sum><sys_created_by>system</sys_created_by><sys_created_on>2017-03-23 09:23:24</sys_created_on><sys_id>6aa6676f8c21320092c0afb9ff6cd480</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>system</sys_updated_by><sys_updated_on>2017-03-23 09:23:24</sys_updated_on></sys_ui_list_element><sys_ui_list_element action="INSERT_OR_UPDATE"><average_value>false</average_value><element>short_description</element><list_id display_value="task" element="NULL" name="task" parent="NULL" relationship="NULL" sys_domain="global" view="Default view">62a6676f8c21320092c0afb9ff6cd480</list_id><max_value>false</max_value><min_value>false</min_value><position>4</position><sum>false</sum><sys_created_by>system</sys_created_by><sys_created_on>2017-03-23 09:23:24</sys_created_on><sys_id>eaa6676f8c21320092c0afb9ff6cd480</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>system</sys_updated_by><sys_updated_on>2017-03-23 09:23:24</sys_updated_on></sys_ui_list_element><sys_ui_list_element action="INSERT_OR_UPDATE"><average_value>false</average_value><element>sys_class_name</element><list_id display_value="task" element="NULL" name="task" parent="NULL" relationship="NULL" sys_domain="global" view="Default view">62a6676f8c21320092c0afb9ff6cd480</list_id><max_value>false</max_value><min_value>false</min_value><position>5</position><sum>false</sum><sys_created_by>system</sys_created_by><sys_created_on>2017-03-23 09:23:24</sys_created_on><sys_id>6ea6676f8c21320092c0afb9ff6cd480</sys_id><sys_mod_count>0</sys_mod_count><sys_updated_by>system</sys_updated_by><sys_updated_on>2017-03-23 09:23:24</sys_updated_on></sys_ui_list_element><sys_ui_list action="INSERT_OR_UPDATE"><average_value>false</average_value><element/><max_value>false</max_value><min_value>false</min_value><name>incident</name><parent/><position/><relationship/><sum>false</sum><sys_class_name>sys_ui_list</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-02-20 10:55:15</sys_created_on><sys_customer_update>true</sys_customer_update><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>fae4e36d9f3302000391b89a442e70d7</sys_id><sys_mod_count>0</sys_mod_count><sys_name>incident</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_ui_list_incident_null</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-20 10:55:15</sys_updated_on><sys_user display_value="System Administrator">6816f79cc0a8016401c5a33be04be441</sys_user><view display_value="Default view" name="NULL">Default view</view><view_name/></sys_ui_list></sys_ui_list></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>9cf3e67adb22320030237d9ebf9619af</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table>incident</table>
<target_name>Incident</target_name>
<type>List Layout</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view>Default view</view>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_rest_message_fn_623746d2db00320030237d9ebf96194d</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_rest_message_fn"><sys_rest_message_fn action="INSERT_OR_UPDATE"><authentication_type>inherit_from_parent</authentication_type><basic_auth_password/><basic_auth_profile/><basic_auth_user/><content/><function_name>post</function_name><http_method>post</http_method><lock>false</lock><oauth2_profile/><protocol_name/><qualified_name>OpsGenie Webhook [ post ]</qualified_name><rest_endpoint>https://api.opsgenie.com/v1/json/servicenowv2?apiKey=${apiKey}</rest_endpoint><rest_message display_value="OpsGenie Webhook">6dc682d2db00320030237d9ebf961911</rest_message><sys_class_name>sys_rest_message_fn</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-03 15:40:03</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>623746d2db00320030237d9ebf96194d</sys_id><sys_mod_count>7</sys_mod_count><sys_name>post</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_rest_message_fn_623746d2db00320030237d9ebf96194d</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-21 13:59:01</sys_updated_on><use_basic_auth>false</use_basic_auth><use_mid_server/><use_mutual_auth>false</use_mutual_auth></sys_rest_message_fn></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>d0f3e27adb22320030237d9ebf9619f9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>post</target_name>
<type>HTTP Method</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_956b0346db7c320030237d9ebf9619a6</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>read</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>guest</sys_created_by><sys_created_on>2017-02-09 08:46:16</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>956b0346db7c320030237d9ebf9619a6</sys_id><sys_mod_count>0</sys_mod_count><sys_name>incident</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_956b0346db7c320030237d9ebf9619a6</sys_update_name><sys_updated_by>guest</sys_updated_by><sys_updated_on>2017-02-09 08:46:16</sys_updated_on><target_name>incident</target_name><target_scope display_value="Global">global</target_scope><target_type>sys_db_object</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>d0f3e27adb22320030237d9ebf9619fc</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>incident</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_df4a6422db30320030237d9ebf9619df</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>read</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>guest</sys_created_by><sys_created_on>2017-02-10 10:19:25</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>df4a6422db30320030237d9ebf9619df</sys_id><sys_mod_count>0</sys_mod_count><sys_name>sys_user</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_df4a6422db30320030237d9ebf9619df</sys_update_name><sys_updated_by>guest</sys_updated_by><sys_updated_on>2017-02-10 10:19:25</sys_updated_on><target_name>sys_user</target_name><target_scope display_value="Global">global</target_scope><target_type>sys_db_object</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>d0f3e67adb22320030237d9ebf9619ae</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>sys_user</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_bf9387b9db38320030237d9ebf9619c5</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri/&gt;&lt;enforce_acl/&gt;&lt;http_method&gt;POST&lt;/http_method&gt;&lt;name&gt;assignToGroup&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	var body = request.body.data;
	
	gs.info("[Assign Incident To Group] Processing message: {alias=" + body.alias + ", team=" + body.group + "}");
	
	var alertAlias = body.alias;
	var groupName = body.group;
	
	var inc = new GlideRecord('incident');
	inc.addQuery("x_86994_opsgenie_alert_alias", alertAlias);
	inc.query();
	
	if (inc.next()) {
		var group = new GlideRecord('sys_user_group');
	
		group.addQuery('name', groupName);
		group.query();

		if (group.next()) {
			inc.assignment_group = group.sys_id.toString();

			inc.update();
			gs.info("[Assign Incident To Group] Processing finished.");
		} else {
			gs.debug('[Assign Incident To Group] Unable to find group with name: ' + groupName);
		}
	} else {
		gs.error('[Assign Incident To Group] Unable to find incident with x_86994_opsgenie_alert_alias : ' + alertAlias);
	}
})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/x_86994_opsgenie/opsgenie2sn/assignToGroup&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/assignToGroup&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;false&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;false&lt;/requires_authentication&gt;&lt;short_description/&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-02-08 13:41:33&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;bf9387b9db38320030237d9ebf9619c5&lt;/sys_id&gt;&lt;sys_mod_count&gt;11&lt;/sys_mod_count&gt;&lt;sys_name&gt;assignToGroup&lt;/sys_name&gt;&lt;sys_package display_value="OpsGenie" source="x_86994_opsgenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="OpsGenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_bf9387b9db38320030237d9ebf9619c5&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-02-21 12:10:18&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="opsgenie2sn"&gt;c08571f8dbd4320030237d9ebf961972&lt;/web_service_definition&gt;&lt;web_service_version/&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>d0f3e67adb22320030237d9ebf9619b1</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>assignToGroup</target_name>
<type>Scripted REST Resource</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_documentation_incident_x_86994_opsgenie_alert_alias_en</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update><sys_documentation element="x_86994_opsgenie_alert_alias" label="Alert alias" language="en" table="incident"><sys_documentation action="INSERT_OR_UPDATE"><element>x_86994_opsgenie_alert_alias</element><help/><hint/><label>Alert alias</label><language>en</language><name>incident</name><plural>Alert alias</plural><sys_class_name>sys_documentation</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-12 12:21:50</sys_created_on><sys_customer_update>false</sys_customer_update><sys_id>75303341db90720030237d9ebf9619b3</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Alert alias</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_documentation_incident_x_86994_opsgenie_alert_alias_en</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-12 12:21:50</sys_updated_on><url/><url_target/></sys_documentation></sys_documentation></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>d4f3e27adb22320030237d9ebf9619f8</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table>incident</table>
<target_name>Incident.Alert alias</target_name>
<type>Field Label</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_3e482a32dbcc320030237d9ebf961923</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>execute</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-05 07:21:16</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>3e482a32dbcc320030237d9ebf961923</sys_id><sys_mod_count>0</sys_mod_count><sys_name>ScriptableRESTResponse.getStatusCode</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_3e482a32dbcc320030237d9ebf961923</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-05 07:21:16</sys_updated_on><target_name>ScriptableRESTResponse.getStatusCode</target_name><target_scope display_value="Global">global</target_scope><target_type>scriptable</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>d4f3e27adb22320030237d9ebf9619fb</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>ScriptableRESTResponse.getStatusCode</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_ws_operation_3316e27ddbf4320030237d9ebf9619a5</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ws_operation"&gt;&lt;sys_ws_operation action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;consumes&gt;application/json,application/xml,text/xml&lt;/consumes&gt;&lt;consumes_customized&gt;false&lt;/consumes_customized&gt;&lt;default_operation_uri/&gt;&lt;enforce_acl/&gt;&lt;http_method&gt;POST&lt;/http_method&gt;&lt;name&gt;resolve&lt;/name&gt;&lt;operation_script&gt;&lt;![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
	var body = request.body.data;
	
	gs.info("[Resolve Incident] Processing message: {alias=" + body.alias + ", note=" + body.workNotes + "}");
	
	var alertAlias = body.alias;
	var closeNote = body.workNotes;
	
	var inc = new GlideRecord('incident');
	
	inc.addQuery("x_86994_opsgenie_alert_alias", alertAlias);
	inc.query();
	
	if (inc.next()) {
		inc.close_notes = closeNote;
		inc.close_code = "Solved (Permanently)";
		inc.state = 6;
		
		inc.update();
		gs.info("[Resolve Incident] Processing finished.");
	} else {
		gs.info("[Resolve Incident] Alert Id not found, skipping action.");
	}
})(request, response);]]&gt;&lt;/operation_script&gt;&lt;operation_uri&gt;/api/x_86994_opsgenie/opsgenie2sn/resolve&lt;/operation_uri&gt;&lt;produces&gt;application/json,application/xml,text/xml&lt;/produces&gt;&lt;produces_customized&gt;false&lt;/produces_customized&gt;&lt;relative_path&gt;/resolve&lt;/relative_path&gt;&lt;request_example/&gt;&lt;requires_acl_authorization&gt;false&lt;/requires_acl_authorization&gt;&lt;requires_authentication&gt;false&lt;/requires_authentication&gt;&lt;short_description/&gt;&lt;sys_class_name&gt;sys_ws_operation&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-02-08 13:33:27&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;3316e27ddbf4320030237d9ebf9619a5&lt;/sys_id&gt;&lt;sys_mod_count&gt;10&lt;/sys_mod_count&gt;&lt;sys_name&gt;resolve&lt;/sys_name&gt;&lt;sys_package display_value="OpsGenie" source="x_86994_opsgenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="OpsGenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ws_operation_3316e27ddbf4320030237d9ebf9619a5&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-02-21 07:47:30&lt;/sys_updated_on&gt;&lt;web_service_definition display_value="opsgenie2sn"&gt;c08571f8dbd4320030237d9ebf961972&lt;/web_service_definition&gt;&lt;web_service_version/&gt;&lt;/sys_ws_operation&gt;&lt;/record_update&gt;</payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>d4f3e67adb22320030237d9ebf9619b0</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>resolve</target_name>
<type>Scripted REST Resource</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_app_module_435c952edb44320030237d9ebf961925</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_app_module"><sys_app_module action="INSERT_OR_UPDATE"><active>true</active><application display_value="OpsGenie">e92b8656db00320030237d9ebf9619f9</application><assessment/><content_page/><device_type/><filter table="sys_rest_message">rest_endpointLIKEopsgenie^EQ<item endquery="false" field="rest_endpoint" goto="false" newquery="false" operator="LIKE" or="false" value="opsgenie"/><item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/></filter><hint/><homepage/><image/><link_type>LIST</link_type><map_page/><mobile_title>REST Message</mobile_title><mobile_view_name>Mobile</mobile_view_name><name>sys_rest_message</name><order/><override_menu_roles>false</override_menu_roles><query/><report/><roles/><survey/><survey_overwrite>true</survey_overwrite><sys_class_name>sys_app_module</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-04 07:13:52</sys_created_on><sys_customer_update>true</sys_customer_update><sys_domain>global</sys_domain><sys_domain_path>/</sys_domain_path><sys_id>435c952edb44320030237d9ebf961925</sys_id><sys_mod_count>0</sys_mod_count><sys_name>REST Message</sys_name><sys_overrides/><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_app_module_435c952edb44320030237d9ebf961925</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-01-04 07:13:52</sys_updated_on><timeline_page/><title>REST Message</title><uncancelable>false</uncancelable><view_name/><window_name/></sys_app_module></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>d8f3e27adb22320030237d9ebf9619f7</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table>sys_rest_message</table>
<target_name>REST Message</target_name>
<type>Module</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_scope_privilege_2ae7efc6db30720030237d9ebf96192e</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_scope_privilege"><sys_scope_privilege action="INSERT_OR_UPDATE"><operation>execute</operation><source_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</source_scope><status>allowed</status><sys_class_name>sys_scope_privilege</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-02-09 10:50:53</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>2ae7efc6db30720030237d9ebf96192e</sys_id><sys_mod_count>0</sys_mod_count><sys_name>GlideRecord.update</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_scope_privilege_2ae7efc6db30720030237d9ebf96192e</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-09 10:50:53</sys_updated_on><target_name>GlideRecord.update</target_name><target_scope display_value="Global">global</target_scope><target_type>scriptable</target_type></sys_scope_privilege></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>d8f3e27adb22320030237d9ebf9619fa</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>GlideRecord.update</target_name>
<type>Cross scope privilege</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_script_include_50a78ad2db00320030237d9ebf961976</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_script_include"&gt;&lt;sys_script_include action="INSERT_OR_UPDATE"&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;active&gt;true&lt;/active&gt;&lt;api_name&gt;x_86994_opsgenie.OpsGenie_Client&lt;/api_name&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;description/&gt;&lt;name&gt;OpsGenie_Client&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var OpsGenie_Client = Class.create();

OpsGenie_Client.prototype = {
    initialize: function() {
		this.apiKey = "[YOUR OPSGENIE SERVICENOW INTEGRATION API KEY]"; // paste the API key provided by OpsGenie here.
    },
	
	postToOpsGenie: function(contentMap) {
		try {
			var rest = new sn_ws.RESTMessageV2('x_86994_opsgenie.OpsGenie Webhook', 'post');
			rest.setStringParameter("apiKey", this.apiKey);
			var content = new global.JSON().encode(contentMap);
			rest.setRequestBody(content);

			gs.info("[OpsGenie_Client] Posting to " + rest.getEndpoint() + " content: " + content);
			var response = rest.execute();
			var responseBody = response.getBody();
			var httpStatus = response.getStatusCode();

			var responseLogMessage = "Response status: " + httpStatus + ", body: " + responseBody;
			if(httpStatus != 200){
				gs.debug("[OpsGenie_Client] Error: " + responseLogMessage);
			} else{
				gs.debug("[OpsGenie_Client] " + responseLogMessage);
			}
		}
		catch(ex) {
			var message = ex.getMessage();
			gs.error("[OpsGenie_Client] Exception occured: ", ex);
		}
	},
	
	postToOpsGenieAlertAPI: function(contentMap, subEndPoint) {
		try {
			var rest = new sn_ws.RESTMessageV2('x_86994_opsgenie.OpsGenie Alert API Endpoint', 'post');
			rest.setStringParameter("apiKey", this.apiKey);
			rest.setStringParameter("subEndPoint", subEndPoint);
			
			var content = new global.JSON().encode(contentMap);
			rest.setRequestBody(content);

			gs.info("[OpsGenie_Client] Posting to " + rest.getEndpoint() + " content: " + content);
			var response = rest.execute();
			var responseBody = response.getBody();
			var httpStatus = response.getStatusCode();

			var responseLogMessage = "Response status: " + httpStatus + ", body: " + responseBody;
			if(httpStatus != 200){
				gs.debug("[OpsGenie_Client] Error: " + responseLogMessage);
			} else{
				gs.debug("[OpsGenie_Client] " + responseLogMessage);
			}
		}
		catch(ex) {
			var message = ex.getMessage();
			gs.error("[OpsGenie_Client] Exception occured: ", ex);
		}
	},
	
    type: 'OpsGenie_Client'
};]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script_include&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-01-03 15:42:31&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_id&gt;50a78ad2db00320030237d9ebf961976&lt;/sys_id&gt;&lt;sys_mod_count&gt;32&lt;/sys_mod_count&gt;&lt;sys_name&gt;OpsGenie_Client&lt;/sys_name&gt;&lt;sys_package display_value="OpsGenie" source="x_86994_opsgenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="OpsGenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_include_50a78ad2db00320030237d9ebf961976&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-02-21 14:00:48&lt;/sys_updated_on&gt;&lt;/sys_script_include&gt;&lt;/record_update&gt;</payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>d8f3e67adb22320030237d9ebf9619af</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>OpsGenie_Client</target_name>
<type>Script Include</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_rest_message_fn_d815f9b8dbd4320030237d9ebf9619ef</name>
<payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_rest_message_fn"><sys_rest_message_fn action="INSERT_OR_UPDATE"><authentication_type>inherit_from_parent</authentication_type><basic_auth_password/><basic_auth_profile/><basic_auth_user/><content/><function_name>post</function_name><http_method>post</http_method><lock>false</lock><oauth2_profile/><protocol_name/><qualified_name>OpsGenie Alert API Endpoint [ post ]</qualified_name><rest_endpoint>https://api.opsgenie.com/v1/json/alert${subEndPoint}?apiKey=${apiKey}</rest_endpoint><rest_message display_value="OpsGenie Alert API Endpoint">a80435b8dbd4320030237d9ebf961914</rest_message><sys_class_name>sys_rest_message_fn</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2017-01-11 08:45:28</sys_created_on><sys_customer_update>true</sys_customer_update><sys_id>d815f9b8dbd4320030237d9ebf9619ef</sys_id><sys_mod_count>6</sys_mod_count><sys_name>post</sys_name><sys_package display_value="OpsGenie" source="x_86994_opsgenie">98838612db00320030237d9ebf9619ae</sys_package><sys_policy/><sys_replace_on_upgrade>false</sys_replace_on_upgrade><sys_scope display_value="OpsGenie">98838612db00320030237d9ebf9619ae</sys_scope><sys_update_name>sys_rest_message_fn_d815f9b8dbd4320030237d9ebf9619ef</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2017-02-21 13:57:01</sys_updated_on><use_basic_auth>false</use_basic_auth><use_mid_server/><use_mutual_auth>false</use_mutual_auth></sys_rest_message_fn></record_update>]]></payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>dcf3e27adb22320030237d9ebf9619f9</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table/>
<target_name>post</target_name>
<type>HTTP Method</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
<sys_update_xml action="INSERT_OR_UPDATE">
<action>INSERT_OR_UPDATE</action>
<application display_value="OpsGenie">98838612db00320030237d9ebf9619ae</application>
<category>customer</category>
<comments/>
<name>sys_script_2fb5c292db00320030237d9ebf9619ad</name>
<payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="sys_script"&gt;&lt;sys_script action="INSERT_OR_UPDATE"&gt;&lt;abort_action&gt;false&lt;/abort_action&gt;&lt;access&gt;package_private&lt;/access&gt;&lt;action_delete&gt;false&lt;/action_delete&gt;&lt;action_insert&gt;false&lt;/action_insert&gt;&lt;action_query&gt;false&lt;/action_query&gt;&lt;action_update&gt;true&lt;/action_update&gt;&lt;active&gt;true&lt;/active&gt;&lt;add_message&gt;false&lt;/add_message&gt;&lt;advanced&gt;true&lt;/advanced&gt;&lt;change_fields&gt;false&lt;/change_fields&gt;&lt;client_callable&gt;false&lt;/client_callable&gt;&lt;collection&gt;incident&lt;/collection&gt;&lt;condition/&gt;&lt;description/&gt;&lt;execute_function&gt;false&lt;/execute_function&gt;&lt;filter_condition table="incident"&gt;stateCHANGESTO6^ORstateCHANGESTO7^EQ&lt;item endquery="false" field="state" goto="false" newquery="false" operator="CHANGESTO" or="false" value="6"/&gt;&lt;item endquery="false" field="state" goto="false" newquery="false" operator="CHANGESTO" or="true" value="7"/&gt;&lt;item endquery="true" field="" goto="false" newquery="false" operator="=" or="false" value=""/&gt;&lt;/filter_condition&gt;&lt;is_rest&gt;false&lt;/is_rest&gt;&lt;message/&gt;&lt;name&gt;OpsGenie Close Alert&lt;/name&gt;&lt;order&gt;2&lt;/order&gt;&lt;priority&gt;1&lt;/priority&gt;&lt;rest_method/&gt;&lt;rest_method_text/&gt;&lt;rest_service/&gt;&lt;rest_service_text/&gt;&lt;rest_variables/&gt;&lt;role_conditions/&gt;&lt;script&gt;&lt;![CDATA[(function executeRule(current, previous /*null when async*/) {
	var client = new OpsGenie_Client();
	var alertAlias = current.x_86994_opsgenie_alert_alias;
	var state = current.state.getDisplayValue().toString();
	var closeNotes = current.close_notes.toString();
	var closeCode = current.close_code.getDisplayValue().toString();
	
	var contentMap = {
		state: state,
		closeCode: closeCode,
		closeNotes: closeNotes,
		incidentNumber: current.number.toString()
	};
	
	if (alertAlias == null || alertAlias == "") {
		contentMap.alias = current.number.toString();
	} else {
		contentMap.alias = alertAlias.toString();
	}
	
	client.postToOpsGenie(contentMap);
})(current, previous);]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;sys_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2017-01-03 15:34:48&lt;/sys_created_on&gt;&lt;sys_customer_update&gt;true&lt;/sys_customer_update&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;2fb5c292db00320030237d9ebf9619ad&lt;/sys_id&gt;&lt;sys_mod_count&gt;25&lt;/sys_mod_count&gt;&lt;sys_name&gt;OpsGenie Close Alert&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="OpsGenie" source="x_86994_opsgenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_replace_on_upgrade&gt;false&lt;/sys_replace_on_upgrade&gt;&lt;sys_scope display_value="OpsGenie"&gt;98838612db00320030237d9ebf9619ae&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_script_2fb5c292db00320030237d9ebf9619ad&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2017-02-21 11:56:31&lt;/sys_updated_on&gt;&lt;template/&gt;&lt;when&gt;async&lt;/when&gt;&lt;/sys_script&gt;&lt;sys_translated_text action="delete_multiple" query="documentkey=2fb5c292db00320030237d9ebf9619ad"/&gt;&lt;/record_update&gt;</payload>
<remote_update_set display_value="OpsGenie">18f3e27adb22320030237d9ebf9619f6</remote_update_set>
<replace_on_upgrade>false</replace_on_upgrade>
<sys_created_by>admin</sys_created_by>
<sys_created_on>2017-05-09 13:39:13</sys_created_on>
<sys_id>dcf3e67adb22320030237d9ebf9619ae</sys_id>
<sys_mod_count>0</sys_mod_count>
<sys_updated_by>admin</sys_updated_by>
<sys_updated_on>2017-05-09 13:39:13</sys_updated_on>
<table>incident</table>
<target_name>OpsGenie Close Alert</target_name>
<type>Business Rule</type>
<update_domain>global</update_domain>
<update_set display_value=""/>
<view/>
</sys_update_xml>
</unload>
